{% load static %}
<!DOCTYPE html>
<html lang="fr">
  <head>
    <script type="text/javascript" src="static/js/cookie/tarteaucitron.js"></script>
    <!--<script type="text/javascript" >
      tarteaucitron.init({
        privacyUrl: "" /* Privacy policy url */,
        bodyPosition:
          "bottom" /* or top to bring it as first element for accessibility */,

        hashtag: "#tarteaucitron" /* Open the panel with this hashtag */,
        cookieName: "tarteaucitron" /* Cookie name */,

        orientation: "middle" /* Banner position (top - bottom) */,

        groupServices: false /* Group services by category */,
        serviceDefaultState: "wait" /* Default state (true - wait - false) */,

        showAlertSmall: false /* Show the small banner on bottom right */,
        cookieslist: false /* Show the cookie list */,

        closePopup: false /* Show a close X on the banner */,

        showIcon: true /* Show cookie icon to manage cookies */,
        //"iconSrc": "", /* Optionnal: URL or base64 encoded image */
        iconPosition:
          "BottomRight" /* BottomRight, BottomLeft, TopRight and TopLeft */,

        adblocker: false /* Show a Warning if an adblocker is detected */,

        DenyAllCta: true /* Show the deny all button */,
        AcceptAllCta: true /* Show the accept all button when highPrivacy on */,
        highPrivacy: true /* HIGHLY RECOMMANDED Disable auto consent */,

        handleBrowserDNTRequest: false /* If Do Not Track == 1, disallow all */,

        removeCredit: false /* Remove credit link */,
        moreInfoLink: true /* Show more info link */,

        useExternalCss: false /* If false, the tarteaucitron.css file will be loaded */,
        useExternalJs: false /* If false, the tarteaucitron.js file will be loaded */,

        //"cookieDomain": ".my-multisite-domaine.fr", /* Shared cookie for multisite */

        readmoreLink: "" /* Change the default readmore link */,

        mandatory: true /* Show a message about mandatory cookies */,
        mandatoryCta: true /* Show the disabled accept button when mandatory on */,  
      });

      tarteaucitron.user.gtagUa = 'G-KXS05KHV5V';
      // tarteaucitron.user.gtagCrossdomain = ['example.com', 'example2.com'];
      tarteaucitron.user.gtagMore = function () { /* add here your optionnal gtag() */ };
      (tarteaucitron.job = tarteaucitron.job || []).push('gtag');
      (tarteaucitron.job = tarteaucitron.job || []).push('instagram');

    </script>-->
    
    <title>{% block title %} La case à accras {% endblock %}</title>
    <link rel="icon" type="image/x-icon" href="{% static 'images/favicon.png' %}">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>

    <link
      href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,500,600,700,800&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Amatic+SC:400,700&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="{% static 'css/open-iconic-bootstrap.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/animate.css' %}" />

    <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/owl.theme.default.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}" />

    <link rel="stylesheet" href="{% static 'css/aos.css' %}" />

    <link rel="stylesheet" href="{% static 'css/ionicons.min.css' %}" />

    <link rel="stylesheet" href="{% static 'css/bootstrap-datepicker.css' %}" />
    <link rel="stylesheet" href="{% static 'css/jquery.timepicker.css' %}" />

    <link rel="stylesheet" href="{% static 'css/flaticon.css' %}" />
    <link rel="stylesheet" href="{% static 'css/icomoon.css' %}" />
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
  </head>
  <body class="goto-here">
    <div id="fb-root"></div>
    <script
      async
      defer
      crossorigin="anonymous"
      src="https://connect.facebook.net/fr_FR/sdk.js#xfbml=1&version=v16.0"
      nonce="f3cdvgXz"
    ></script>
    <div class="py-1 bg-primary">
      <div class="container-fluid">
        <div
          class="row no-gutters d-flex align-items-start align-items-center px-md-0"
        >
          <div class="col-lg-12 d-block">
            <div class="row d-flex">
              <div class="col-md pr-4 d-flex topper align-items-center">
                <div
                  class="icon mr-2 d-flex justify-content-center align-items-center"
                >
                  <span class="icon-phone2"></span>
                </div>
                <span class="text">00 00 00 00 00</span>
              </div>
              <div class="col-md pr-4 d-flex topper align-items-center">
                <div
                  class="icon mr-2 d-flex justify-content-center align-items-center"
                >
                  <span class="icon-paper-plane"></span>
                </div>
                <span class="text">contact@lacaseaaccras.com</span>
              </div>
              <div
                class="col-md-4 d-flex topper align-items-center text-lg-right"
              >
                <span class="text">
                  Ouvert du: <br />
                  Mardi au Vendredi 9h00 à 12h30 / de 15h15 à 19h00
                  <br />
                  Samedi de 8h30 à 12h30 / de 15h15 à 19h00 - Dimanche de 9h00 à
                  12h30</span
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
      <div class="container">
        {% block navbar %}
        <a class="navbar-brand" href="/"><img src="static/images/logo_casa.png" id="logA" alt="" srcset="" style="height: auto; width: 40%"/></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="oi oi-menu"></span> Menu
        </button>
        
        <div class="collapse navbar-collapse" id="ftco-nav">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a href="/" class="nav-link">Accueil</a>
            </li>
            
            <!--<li class="nav-item dropdown" >
              <a href="/"class="nav-link dropdown-toggle"
                id="dropdown04"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"> Accueil</a>
             
            </li>-->
              <li class="nav-item dropdown" >
                <a href="#"class="nav-link dropdown-toggle"
                id="dropdown04"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"> Nos-produits</a>
                <div class="dropdown-menu" aria-labelledby="dropdown04">
                  <a href="/fruits" class="dropdown-item">Fruits</a>
                  <a href="/legumes" class="dropdown-item">Légumes</a>
                  <a href="/corbeilles" class="dropdown-item">Corbeilles</a>
                </div>
              </li>
            {% if request.user.is_authenticated %}
            <li class="nav-item ">
            <a href="/auth/logout" class="nav-link scrollto">Déconnexion
              {{user.username}}
            </a>
            </li>
            {% else %}
            

            <li class="nav-item dropdown" >
              <a href="/auth/signup"class="nav-link dropdown-toggle"
              id="dropdown04"
              data-toggle="dropdown"
              aria-haspopup="true"
              aria-expanded="false"> S'inscrire</a>
              <div class="dropdown-menu" aria-labelledby="dropdown04">
                <a href="/auth/signup" class="dropdown-item">S'inscrire</a>
                
                <a href="/auth/login" class="dropdown-item">Se connecter</a>
              </div>
            </li>
            {% endif %}

            
            <!--<li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="/about"
                id="dropdown04"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
                >A-propos</a
              >
              <div class="dropdown-menu" aria-labelledby="dropdown04">
                <a class="dropdown-item" href="/about">A-propos</a>
                <a class="dropdown-item" href="/cgu">CGU</a>
                <a class="dropdown-item" href="/mentionLegale"
                  >Mention légale</a
                >
              </div>
            </li>-->
            <!--<li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="dropdown04"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
                >Nos produits</a
              >
              <div class="dropdown-menu" aria-labelledby="dropdown04">
                <a class="dropdown-item" href="/epicerie">Epicerie</a>
              </div>
            </li>-->
            
            <!--<li class="nav-item dropdown cta cta-colored">
              <div class="dropdown-menu" aria-labelledby="dropdown04">
                <a href="#" class="dropdown-item">Connexion</a>
                <a href="/inscription" class="dropdown-item">S'inscrire</a>
                <a href="/deconnexion" class="dropdown-item">Deconnexion</a>
              </div>
            </li>-->
          

            <li class="nav-item dropdown cta cta-colored">
              <button type="button" class="nav-link scrollo btn-primary p-3 m-2 text-white" id="poppanier" data-container="body" data-toggle="popover" data-placement="bottom" data-html="true">
                Panier (<span id="panier" >0</span>)
              </button>
              <!--<a
                class="nav-link dropdown-toggle"
                href="#"
                id="dropdown04"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
                ><span class="icon-shopping_cart"></span>[0]</a
              >
              <div class="dropdown-menu" aria-labelledby="dropdown04">
                <a class="dropdown-item" href="/panier">Votre panier</a>
                <a class="dropdown-item" href="/checkout">Commander</a>
              </div>-->
            </li>
            
            <li class="nav-item">
              <a href="/contact" class="nav-link">Contact</a>
            </li>
          </ul>
        </div>
        {% endblock %}
      </div>
      
    </nav>
    <section id="">
      <div class="hero-container">
        {% block content %}
          
        {% endblock %}
       
      </div>


    <main id="main">
      {% block body %}
      

      {% endblock %} 
    </main>
    {% block section %}

    {% endblock %}

   

    <footer class="ftco-footer ftco-section">
      <div class="container">
      {% block footer %}
        <div class="row">
          <div class="mouse">
            <a href="#" class="mouse-icon">
              <div class="mouse-wheel">
                <span class="ion-ios-arrow-up"></span>
              </div>
            </a>
          </div>
        </div>
        <div class="row mb-5">
          <div class="col-md-3">
            <div class="ftco-footer-widget mb-4">
              <div class="col-md">
                <h2 class="ftco-heading-2">Informations</h2>

                <div class="ftco-footer-widget mb-4">
                  <ul class="list-unstyled">
                    <li>
                      <a href="#" class="py-2 d-block">
                        CGV
                      </a>
                    </li>
                    <li>
                      <a href="/mentionLegale" class="py-2 d-block">Mentions légales</a>
                    </li>
                    <li><a href="/livraison" class="py-2 d-block">Livraison</a></li>
                    <li>
                      <a href="/contact" class="py-2 d-block">Contactez nous</a>
                    </li>
                    <li>
                      <a href="/rgpd" class="py-2 d-block">Politique de confidentialité</a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-2">
            <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">Catégories</h2>
              <div class="d-flex">
                <ul class="list-unstyled mr-l-5 pr-l-3 mr-4">
                  <li>
                    <a href="/fruits" class="py-2 d-block">Fruits</a>
                  </li>
                  <li>
                    <a href="/legumes" class="py-2 d-block">Légumes</a>
                  </li>
                  <li>
                    <a href="#" class="py-2 d-block">Corbeille de fruits</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">Contactez-nous</h2>
              <div class="block-23 mb-3">
                <ul>
                  <li>
                    <span class="icon icon-map-marker"></span
                    ><span class="text">Gosier</span
                    >
                  </li>
                  <li>
                    <a href="#"
                      ><span class="icon icon-phone"></span
                      ><span class="text">00 00 00 00 00</span></a
                    >
                  </li>
                  <li>
                    <a href="#"
                      ><span class="icon icon-envelope"></span
                      ><span class="text">contact@lacaseaaccras.com</span></a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">Suivez-nous</h2>
              
            
            <div class="instagram_post" postID="lacase_a_accras" width="width" height="height">
              <ul class="ftco-footer-social list-unstyled float-md-left float-lft">
              <!--<li class="ftco-animate">
                <a href="#"><span class="icon-twitter"></span></a>
              </li>
              <li class="ftco-animate">
                <a href="#"><span class="icon-facebook"></span></a>
              </li>
              <li class="ftco-animate">
                <a href="#"><span class="icon-instagram"></span></a>
              </li>-->
            </ul>

            </div>
          </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12 text-center">
            <p>
              Copyright &copy;
              <script>
                document.write(new Date().getFullYear());
              </script>

              <i class="icon-heart color-danger" aria-hidden="true"></i> by
              <a href="#" target="_blank">Concept-D</a>
            </p>
          </div>
        </div>
        {% endblock %}
      </div>
    </footer>

    <!-- loader -->
    <div id="ftco-loader" class="show fullscreen">
      <svg class="circular" width="48px" height="48px">
        <circle
          class="path-bg"
          cx="24"
          cy="24"
          r="22"
          fill="none"
          stroke-width="4"
          stroke="#eeeeee"
        />
        <circle
          class="path"
          cx="24"
          cy="24"
          r="22"
          fill="none"
          stroke-width="4"
          stroke-miterlimit="10"
          stroke="#F96D00"
        />
      </svg>
    </div>
    <!-- endloader -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="{% static 'js/jquery-migrate-3.0.1.min.js' %}"></script>
    <script src="{% static 'js/popper.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/jquery.easing.1.3.js' %}"></script>
    <script src="{% static 'js/jquery.waypoints.min.js' %}"></script>
    <script src="{% static 'js/jquery.stellar.min.js' %}"></script>
    <script src="{% static 'js/owl.carousel.min.js' %}"></script>
    <script src="{% static 'js/jquery.magnific-popup.min.js' %}"></script>
    <script src="{% static 'js/aos.js' %}"></script>
    <script src="{% static 'js/jquery.animateNumber.min.js' %}"></script>
    <script src="{% static 'js/bootstrap-datepicker.js' %}"></script>
    <script src="{% static 'js/scrollax.min.js' %}"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
    <script src="{% static 'js/google-map.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>
    <script>
      // local storage

      //console.log($('.divpr'))

      
      if (localStorage.getItem('panier') == null){
        var panier = {};
      } else {
        panier = JSON.parse(localStorage.getItem('panier'));
        updatePanier(panier);
      }
      
      $('.divpr').on('click', 'button.panier', function(){
        var idstr = this.id.toString();
        console.log(idstr)
      
        if (panier[idstr] !== undefined) {
            qty = panier[idstr][0] + 1;
      
        } else {
          qty = 1;
          name = document.getElementById('name' + idstr).innerHTML;
          price = document.getElementById('price' + idstr).innerHTML;
          panier[idstr] = [qty, name, price];
        }
        updatePanier(panier);
      
        localStorage.setItem('panier', JSON.stringify(panier));
        document.getElementById('panier').innerHTML = Object.keys(panier).length;
        console.log(Object.keys(panier).length)
        document.getElementById("poppanier").click();
      });

        $('#poppanier').popover();
      
        updatePopover(panier);
       
        function updatePopover(panier){
          console.log('vous avez mis a jour votre panier.');
      
          var popStr = "";
          var popStr = popStr + "<h6>  cart for your items in my shopping cart </h6>" + "<div class='mx-2 my-2'>";
          var i = 1;
          for (var item in panier) {
            popStr = popStr + "<b>" + i + "</b>.";
            popStr = popStr + document.getElementById('name' + item).innerHTML.slice
            (0, 19) + " ... " + "<b>" + panier[item][0] + "</b>" + "Qty" + '<br>';
            i = i + 1;
          }
      
          popStr = popStr + "</div> <a href='checkout'><button class='btn btn-sucess' id='clearPanier'>Payer</button></a> <button class='btn btn-dark' onlick='clearPanier()' id='clearPanier'> Vider panier </button>"
          document.getElementById('poppanier').setAttribute('data-content', popStr);
          $('#poppanier').popover('show');
          document.getElementById("poppanier").click();
        }
      
        function clearPanier(){
          panier = JSON.parse(localStorage.getItem('panier'));
          for (var item in panier){
            document.getElementById('div' + item).innerHTML = '<button id=" ' + item + '" class="btn btn-sucess panier"> Ajout au panier </button>'
          }
          localStorage.clear();
          panier = {};
          updatePanier(panier);
      
          let clear = document.getElementById("poppanier").click();
          document.getElementById("poppanier").click();
        }
      
        function updatePanier(panier){
          console.log('hello! ');

          var sum = 0;
          for( var item in panier) {
            sum = sum + panier[item][0];
            document.getElementById('div' + item).innerHTML = "<button id='minus " + item +"' class='btn btn-success minus'>-</button> <span id='val "+ item + " '' >" + panier[item][0] + "</span> <button id='plus" + item + "' class='btn btn-success plus'>  + </button>";
          }
          localStorage.setItem('panier', JSON.stringify(panier));
          document.getElementById('panier').innerHTML = sum;
          console.log(panier);
          updatePopover(panier);
          document.getElementById("poppanier").click();
        }

        //if plus or minus button 
        $('.divpr').on("click", "button.minus", function(){

          a = this.id.slice(7,);
          
          panier['pr' + a][0]  -= 1;
          panier['pr' + a][0] = Math.max(0, panier['pr' + a][0]);
          document.getElementById('valpr' + a).innerHTML = panier['pr' + a ][0];
          updatePanier(panier);

        })

        $('.divpr').on("click", "button.plus", function(){

          a = this.id.slice(6,);
          panier['pr' + a]?.[0]  += 1;

          document.getElementById('valpr' + a).innerHTML = panier['pr' + a ][0];
          console.log(panier['pr' + a ][0])
          updatePanier(panier);
        })

       
        //console.log('valpr' + a);

    
      
      </script>
      
      
  </body>
</html>
